@use "sass:color";
@use "../../styles/variables" as v;

/* üîπ –ø—Ä–æ—Å—Ç–∞—è ¬´—Ñ–ª—é–∏–¥–Ω–∞—è¬ª —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –±–µ–∑ –∂—ë—Å—Ç–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ */
@mixin fluid-text($min: 0.875rem, $vw: 0.3vw, $max: 1rem) {
  font-size: clamp($min, $vw + 0.85rem, $max);
}

.selectContainer {
  position: relative;
  width: 100%;
  font-family: sans-serif;
  /* ‚õîÔ∏è –±—ã–ª–æ white-space: nowrap; ‚Äî –æ–Ω–æ –ª–æ–º–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
}

/* —á—Ç–æ–±—ã ellipsis —Ä–∞–±–æ—Ç–∞–ª –≤ —Ñ–ª–µ–∫—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ */
.selectHeader {
  display: flex;
  justify-content: flex-start;
  gap: 8px;
  align-items: center;
  padding: 12px 16px;
  background-color: v.$color-white;
  border: 1px solid v.$color-border;
  border-radius: 8px;
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
  min-width: 0; /* –≤–∞–∂–Ω–æ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ */

  &:hover {
    border-color: color.adjust(v.$color-primary, $lightness: 10%);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
  }
}

/* –æ–±—â–∏–π ¬´—Ç–æ–Ω¬ª —Ç–µ–∫—Å—Ç–∞ */
.selectedLabel,
.placeholder,
.option,
.searchInput,
.multiValueTag {
  @include fluid-text();
  line-height: 1.25;
}

.selectedLabel,
.placeholder {
  flex: 1 1 auto;
  min-width: 0; /* –±–µ–∑ —ç—Ç–æ–≥–æ ellipsis –≤ flex —á–∞—Å—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç */
}

.selectedLabel {
  color: v.$color-text-main;
  font-weight: 500;
}
.placeholder {
  color: v.$color-text-light;
}

/* üîπ —Å–∞–º —Ç–µ–∫—Å—Ç –≤ —à–∞–ø–∫–µ ‚Äî –æ–±—Ä–µ–∑–∞–µ–º —Å —Ç—Ä–æ–µ—Ç–æ—á–∏–µ–º */
.labelText {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: left;
  /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º—Å—è, —á—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ –º–µ–∂–¥—É –ª–µ–≤–æ–π —á–∞—Å—Ç—å—é –∏ –∏–∫–æ–Ω–∫–æ–π */
  max-width: 100%;
}

/* –∏–∫–æ–Ω–∫–∞ –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
.icon {
  color: v.$color-text-light;
  transition: transform 0.2s;
  flex: 0 0 auto; /* üîπ */
  margin-left: auto;

  &.open {
    transform: rotate(180deg);
  }
}

/* –¥—Ä–æ–ø–¥–∞—É–Ω */
.dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 500;
  margin-top: 8px;
  background-color: v.$color-white;
  border: 1px solid v.$color-border;
  border-radius: 8px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transform-origin: top;
  /* üîπ –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö 200px –≤–Ω–∏–∑—É */
}

/* –ø–æ–∏—Å–∫ */
.searchBox {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  border-bottom: 1px solid v.$color-border;
}

.searchIcon {
  color: v.$color-text-light;
}
.searchInput {
  flex: 1 1 auto;
  border: none;
  outline: none;
  padding: 0;
  background: transparent;
  min-width: 0;
  font-size: 16px;
}

/* —Å–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–π */
.optionsList {
  /* üîπ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞/—Å–ª–∞–≥–∞–µ–º—ã–µ */
  overflow-y: auto;
  padding: 5px 0;
  max-height: clamp(180px, 35vh, 420px);
}

.option {
  padding: 10px 15px;
  cursor: pointer;
  color: v.$color-text-main;
  transition: background-color 0.2s;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  /* üîπ —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤, —á—Ç–æ–±—ã –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–ª–æ —à–∏—Ä–∏–Ω—É */
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;

  &:hover {
    background-color: v.$color-bg-light;
  }

  &.active {
    background-color: v.$color-primary;
    color: v.$color-white;
    font-weight: 600;

    &:hover {
      background-color: color.adjust(v.$color-primary, $lightness: -5%);
    }
  }
}

.checkMark {
  margin-left: auto;
  color: v.$color-status-done;
}

/* –º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä ‚Äî —Ç–µ–≥–∏ */
.multiValueWrapper {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-right: 10px;
  flex: 1 1 auto;
  min-width: 0; /* –≤–∞–∂–Ω–æ */
}

.multiValueTag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 6px;
  background-color: v.$color-border-base;
  color: v.$hint-bg;
  cursor: pointer;
  transition: background-color 0.2s;
  max-width: 100%; /* üîπ –Ω–µ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  min-width: 0;

  &:hover {
    background-color: v.$color-slider-off;
  }
}

/* üîπ —Å–∞–º —Ç–µ–∫—Å—Ç —Ç–µ–≥–∞ ‚Äî —Å –æ–±—Ä–µ–∑–∫–æ–π */
.tagText {
  display: inline-block;
  min-width: 0;
  max-width: 12em; /* —Ä–∞–∑—É–º–Ω—ã–π –ø—Ä–µ–¥–µ–ª —à–∏—Ä–∏–Ω—ã –æ–¥–Ω–æ–≥–æ —Ç–µ–≥–∞ */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  /* –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø–æ–∑–≤–æ–ª–∏–º –µ—â—ë —á—É—Ç—å —É–∂–∞—Ç—å—Å—è */
  @media (max-width: 480px) {
    max-width: 9em;
  }
}

.removeTag {
  flex: 0 0 auto;
  font-weight: bold;
}

.noResults {
  padding: 10px 15px;
  color: v.$color-text-light;
  font-style: italic;
}

/* creatable */
.createOption {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  background: linear-gradient(90deg, #f0fdf4, v.$color-white);
  border-bottom: 1px solid v.$color-border;
  color: v.$color-primary;
  font-weight: 600;

  /* –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è ‚Äî –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å */
  strong {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }

  &:hover {
    background: linear-gradient(90deg, v.$color-lime-50, v.$color-white);
  }
  svg {
    color: v.$color-accent-end;
  }
}

.createLabel {
  display: flex;
  align-items: center;
  gap: 8px;
}
